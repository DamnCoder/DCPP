# External projects
INCLUDE(ExternalProject)

SET(DCPPSIGNALS Project_DCPPSignals)

SET(DCPPSIGNALS_INCLUDE_DIRS "${EXTERNALS_PATH}/dcpp_signals/project/include")

MESSAGE(STATUS "External project name: " ${DCPPSIGNALS})
MESSAGE(STATUS "Externals path" ${EXTERNALS_PATH})

EXTERNALPROJECT_ADD(
	${DCPPSIGNALS}

	#PREFIX "${DCPPMATH_LIB_OUTPUT_PATH}"

	GIT_REPOSITORY "https://github.com/DamnCoder/DC-Signals.git"
  	GIT_TAG "master"

  	UPDATE_COMMAND ${GIT_EXECUTABLE} pull
  	PATCH_COMMAND ""
	INSTALL_COMMAND ""
	CONFIGURE_COMMAND ${CMAKE_COMMAND} 
		-DCMAKE_INSTALL_PREFIX:PATH=<INSTALL_DIR>
        ${EXTERNALS_PATH}/dcpp_signals/project # Tell CMake to use subdirectory as source.

	SOURCE_DIR ${EXTERNALS_PATH}/dcpp_signals

	INSTALL_DIR ${DCPP_LIBRARY_OUTPUT_PATH}
)

EXTERNALPROJECT_ADD_STEP(
  ${DCPPSIGNALS} CopyToBin
  COMMAND ${CMAKE_COMMAND} -E copy_directory ${DCPPSIGNALS_INCLUDE_DIRS} ${DCPP_LIBRARY_OUTPUT_PATH}/include
  DEPENDEES install
)

ADD_LIBRARY(DCPPSignals INTERFACE IMPORTED)

ADD_DEPENDENCIES(DCPPSignals ${DCPPSIGNALS})

INCLUDE_DIRECTORIES(${DCPPSIGNALS_INCLUDE_DIRS})

MESSAGE(STATUS " INCLUDE DIR: " ${DCPPSIGNALS_INCLUDE_DIRS})
# External projects
INCLUDE(ExternalProject)

SET(DCPPMATH DCPPMath)

SET(DCPPMATH_INCLUDE_DIRS "${EXTERNALS_PATH}/dcpp_math/project/include")

MESSAGE(STATUS "External project name: " ${DCPPMATH})
MESSAGE(STATUS "Externals path" ${EXTERNALS_PATH})

EXTERNALPROJECT_ADD(
	${DCPPMATH}

	#PREFIX "${DCPPMATH_LIB_OUTPUT_PATH}"

	GIT_REPOSITORY "https://github.com/DamnCoder/DCPP-Math.git"
  	GIT_TAG "master"

  	UPDATE_COMMAND ${GIT_EXECUTABLE} pull

  	PATCH_COMMAND ""
	INSTALL_COMMAND ""
	CONFIGURE_COMMAND ${CMAKE_COMMAND} 
		-DCMAKE_INSTALL_PREFIX:PATH=<INSTALL_DIR>
        ${EXTERNALS_PATH}/dcpp_math/project # Tell CMake to use subdirectory as source.

	SOURCE_DIR ${EXTERNALS_PATH}/dcpp_math

	INSTALL_DIR ${DCPP_LIBRARY_OUTPUT_PATH}
)

EXTERNALPROJECT_ADD_STEP(
  ${DCPPMATH} CopyToBin
  COMMAND ${CMAKE_COMMAND} -E copy_directory ${DCPPMATH_INCLUDE_DIRS} ${DCPP_LIBRARY_OUTPUT_PATH}/include
  DEPENDEES install
)


INCLUDE_DIRECTORIES(${DCPPMATH_INCLUDE_DIRS})

MESSAGE(STATUS " INCLUDE DIR: " ${DCPPMATH_INCLUDE_DIRS})